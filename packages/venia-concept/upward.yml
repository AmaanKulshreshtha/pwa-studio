# This is the UPWARD specification file for the Venia storefront.
# It is used by an UPWARD server implementation, such as upward-js and
# upward-php, to describe how the server responds to requests.
# See: https://pwastudio.io/technologies/upward/

# The root properties of an UPWARD spec file are part of a global context
# that includes request and environment data.
# These properties are available to other properties and are ultimately
# populated with Resolvers.

# The root 'status', 'headers', and 'body' properties are required properties
# in an UPWARD spec file.
# An UPWARD server uses the resolved values of these properties to create an
# HTTP response to the client.
# In this file, these properties get their values from a top-level
# 'response' object, which is a recommended and best practice approach.
status: response.status
headers: response.headers
body: response.body

# Before delegating to the veniaResponse object, check for our exception case.
# This is a hack to get around the problem with Venia's route ordering which
# doesn't support CMS page URLs with no suffix yet.
response:
  when:
    - matches: request.url.pathname
      pattern: '/zetlen-rich-content-api-test'
      use: veniaAppShell
  default: veniaResponse
